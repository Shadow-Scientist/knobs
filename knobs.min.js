!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Knobs=e()}(this,(function(){"use strict";const t=t=>t+""=="[object Object]";function e(a,...o){if(!o.length)return a;const r=o.shift();if(t(a)&&t(r))for(const o in r)t(r[o])?(a[o]||Object.assign(a,{[o]:{}}),e(a[o],r[o])):Object.assign(a,{[o]:r[o]});return e(a,...o)}function a(t){return"range"==t.type?`\n      <div class="range" style="--step:${t.step||1}; --min:${t.min}; --max:${t.max}; --value:${t.value}; --text-value:'${t.value}'">\n        <input type="range" ${this.knobAttrs(t)} oninput="this.parentNode.style.setProperty('--value',this.value); this.parentNode.style.setProperty('--text-value', JSON.stringify(this.value))">\n        <output></output>\n        <div class='range__progress'></div>\n      </div>`:"checkbox"==t.type?`\n      <div class="switch">\n        <input type='${t.type}' ${this.knobAttrs(t)} class="switch__input">\n        <div class='switch__gfx'></div>\n      </div>`:`<div><input type='${t.type}' ${this.knobAttrs(t)}></div>`}var o=window.requestAnimationFrame||(t=>window.setTimeout(t,1e3/60));function r(a){if(!window.CSS||!CSS.supports("top","var(--a)"))return this;const{knobs:o,...r}=a||{};this.knobs=o?o.map((e=>e.cssVar?{...e,cssVar:[...e.cssVar]}:t(e)?{...e}:e)):[],this.settings=e({...this._defaults,appendTo:document.body},r),this.DOM={},this.state={},this.build()}return r.prototype={_types:["range","color","checkbox","text"],_defaults:{visible:0,live:!0,theme:{flow:"horizontal",styles:"",RTL:!1,position:"top right",primaryColor:"#0366D6",background:"rgba(0,0,0,1)",textColor:"white",border:"none"}},getCSSVariables({flow:t,styles:e,RTL:a,position:o,...r}){var n,i="";for(n in r)i+=`--${n}:${r[n]}; `;return i},parseHTML:t=>(new DOMParser).parseFromString(t.trim(),"text/html").body.firstElementChild,templates:{scope:function(){const{visible:t,live:e,theme:a}=this.settings;return`\n    <aside class='knobs' data-position='${a.position}' data-flow='${a.flow}'>\n      <input hidden type='checkbox' ${t?"checked":""} id='knobsToggle' />\n      <label title='Demo Settings' ${2==t?"style='display:none'":""} for='knobsToggle'>⚙️</label>\n      <form class='knobs__labels'>\n        <fieldset></fieldset>\n        <section class='knobs__controls'>\n          <a class='poweredBy' href='https://github.com/yairEO/knobs' target='_blank'>Get <em>Knobs</em></a>\n          <input type="reset" value="↩ Reset">\n          ${e?"":'<input type="submit" value="Apply">'}\n        </section>\n      </form>\n    </aside>\n  `},knob:function(t){return t&&t.type?`<div class='knobs__knob'>\n        <button type='button' name='${t.__name}' class='knobs__knob__reset' title='reset'>↩</button>\n        <label data-type='${t.type}'>\n          <div class='knobs__label' ${t.cssVar&&t.cssVar[1]?`data-type='${t.cssVar[1]}'`:""}>${t.label}</div>\n          <div class='knobs__inputWrap'>\n            ${a.call(this,t)}\n          </div>\n        </label>\n      </div>\n    `:t&&"string"==typeof t?`<div class='knobs__seperator'>&nbsp;&nbsp;${t}&nbsp;&nbsp;</div>`:"<hr/>"}},knobAttrs(t){var e=`name="${t.__name}"`,a=["label","type","onchange","cssvar"];for(var o in t)a.includes(o.toLowerCase())||(e+=` ${o}="${t[o]}"`);return e},getKnobDataByName(t){return this.knobs.filter(Boolean).find((e=>e.__name==t))},getInputByName(t){return this.DOM.scope.querySelector(`input[name="${t}"`)},onChange(t){var e,a=this.getKnobDataByName(t.target.name),r="input"==t.type&&a&&"range"!=a.type,n=a&&"checkbox"==a.type;a&&(n||this.settings.live)&&("input"==t.type&&r||(e={...a,value:t.target.value},o((()=>this.updateDOM(e))),"function"==typeof a.onChange&&a.onChange(t,e)))},updateDOM({cssVar:t,value:e,type:a,__name:o}){if(t&&t.length){var[r,n,i]=t,s=i||this.settings.CSSVarTarget,l=this.getInputByName(o),c="setProperty";if("checkbox"==a&&l&&!l.checked&&(c="removeProperty"),s+""=="[object HTMLElement]"&&(s=[s]),s&&s.length&&void 0!==e&&r)for(let t of s)t.style[c]("--"+r,e+(n||""))}},resetAll(t){(t||this.knobs).forEach((t=>{if(t&&t.type){var e="checkbox"==t.type,a="range"==t.type,o={target:{value:t.value,name:t.__name}},r=this.getInputByName(t.__name);e?r.checked=!!t.checked:r.value=t.value,a&&r.parentNode.style.setProperty("--value",t.value),this.onChange(o)}}))},resetKnobByName(t){this.resetAll([this.getKnobDataByName(t)])},generateIds(){this.knobs.forEach((t=>{t&&t.type&&(t.__name=t.label.replace("/ /g","-")+Math.random().toString(36).slice(-6))}))},onSubmit(t){t.preventDefault();var e=[...t.target.elements];return this.settings.live=!0,e.forEach((t=>this.onChange({target:{value:t.value,name:t.name}}))),this.settings.live=!1,!1},onClick(t){var e,a=t.target;e="knobs__knob__reset",a.classList.contains(e)&&this.resetKnobByName(a.name)},toggle(t){void 0===t&&(t=!this.DOM.mainToggler.checked),this.state.visible=t,t&&(this.DOM.iframe.style.setProperty("--knobsWidth","1000px"),this.DOM.iframe.style.setProperty("--knobsHeight","1000px"));var e=(t?"set":"remove")+"Property",{clientWidth:a,clientHeight:o}=this.DOM.scope;this.DOM.iframe.style[e]("--knobsWidth",a+"px"),this.DOM.iframe.style[e]("--knobsHeight",o+"px"),this.DOM.mainToggler.checked=t},build(){this.createIframe(),this.bindEvents()},createIframe(){var t,e,a=this.settings.theme;this.DOM.iframe=document.createElement("iframe"),this.DOM.iframe.setAttribute("class","knobsIframe"),this.DOM.iframe.style.cssText=`\n        border: none;\n        position: fixed;\n        z-index: 999999;\n        ${(a.position+" ").split(" ").join(":0;")}\n        width: var(--knobsWidth, 35px);\n        height: var(--knobsHeight, 30px);\n    `,this.settings.appendTo.appendChild(this.DOM.iframe),(t=this.DOM.iframe.contentWindow.document).open(),t.write(this.templates.scope.call(this)),e=`.knobs{ ${this.getCSSVariables(a)} }`,e+="label,button,input{cursor:pointer;font:12px Arial, sans-serif}body,form{padding:0;margin:0}.poweredBy{float:left;text-decoration:none;color:inherit;padding:3px;font-size:10px;opacity:.5;transition:.15s}.poweredBy:hover{color:var(--primaryColor);opacity:1}#knobsToggle:checked ~ .knobs__labels{transform:none;transition:calc(var(--in-duration) * 1s) var(--in-easing)}#knobsToggle:checked ~ .knobs__labels fieldset,#knobsToggle:checked ~ .knobs__labels .knobs__controls{transform:none;opacity:1;transition:calc(var(--in-duration) * 1s) calc(var(--in-duration) * .5s) ease-out}.knobs{--knobs-gap: 3px;--in-easing: cubic-bezier(.75,0,.35,1);--in-duration: .3;--color-size: 22px;--LTR-Bool: 1;font:12px/1 'Fira Sans Condensed', sans-serif;color:var(--textColor);position:fixed;z-index:999999;top:0;right:0}.knobs[data-flow='compact']{--color-size: 16px}.knobs[data-flow='compact'] label[data-type='range']{flex-flow:column}.knobs[data-flow='compact'] label[data-type='range'] .knobs__label{margin:0;padding:0}.knobs label{user-select:none;cursor:pointer}.knobs>label{position:absolute;top:10px;right:10px;font-size:20px;line-height:1;z-index:999}.knobs__labels{background:var(--background);border:var(--border);transform:translateX(calc(100% * var(--LTR-Bool)))}.knobs__labels fieldset{display:table;border:0;padding:0;margin:0;padding:30px 12px 12px;opacity:0;transform:translateX(calc(15% * var(--LTR-Bool)))}.knobs__seperator{display:flex;align-items:center;margin:1.2em 0 .7em;font-weight:700}.knobs__seperator::before,.knobs__seperator::after{content:'';height:1px;background:var(--textColor);flex:1;opacity:.25}.knobs__labels hr{border:0;border-top:1px solid var(--textColor);opacity:.25}.knobs__labels hr:last-of-type{margin-bottom:0}.knobs__knob{display:flex;position:relative}.knobs__knob__reset{margin-right:5px;color:inherit;background:none;border:0;padding:0;cursor:pointer;opacity:0;margin-left:-10px;margin-bottom:var(--knobs-gap, 6px);align-self:flex-end;transition:.1s;outline:none}.knobs__knob__reset:hover{opacity:1}.knobs__knob:hover .knobs__knob__reset{opacity:.4}.knobs__label::after{content:attr(data-type);opacity:.5;margin-left:1ch}.knobs__labels label{flex:1;display:flex}.knobs__labels label>*{padding:var(--knobs-gap, 6px) 0}.knobs__labels .range,.knobs__labels input[type=text]{min-width:200px}.knobs__label{margin-right:2ch;white-space:nowrap;display:flex;align-items:center}.knobs__labels label>:last-child{flex:1;text-align:right}.knobs[data-position~='bottom']>label{top:0}.knobs[data-position~='bottom'][data-position~='right'] .knobs__controls{padding-right:40px}.knobs[data-position~='bottom'] #knobsToggle:checked+label{top:auto;bottom:10px}.knobs[data-position~='left']{--LTR-Bool: -1}.knobs[data-position~='left']>label{right:3px}.knobs[data-position~='left'] #knobsToggle:checked+label{left:10px;right:auto}.knobs[data-position~='left'] .knobs__controls>:first-child:not(:only-child){margin-left:26px}.knobs .range{--primaryColor: inherit;--value-active-color: white;--value-background: transparent;--progress-color: #444;--thumb-size: 20px;--track-height: calc(var(--thumb-size)/3);--thumb-shadow: 0 0 3px rgba(0,0,0,.2);--ticks-thickness: 1px;--ticks-height: 0px;--show-min-max: none;color:transparent}.range{--primaryColor: #0366D6;--value-active-color: white;--value-background: white;--value-font: 700 12px/1 Arial;--progress-color: #EEE;--progress-shadow: 2px 2px 4px rgba(0,0,0, .1) inset;--fill-color: var(--primaryColor);--thumb-size: 16px;--track-height: calc(var(--thumb-size)/2);--thumb-shadow: 0 0 3px rgba(0,0,0,.2);--ticks-thickness: 1px;--ticks-height: 5px;--ticks-color: silver;--step: 1;--ticks-count: (var(--max) - var(--min)) / var(--step);--maxTicksAllowed: 30;--too-many-ticks: Min(1, Max(var(--ticks-count) - var(--maxTicksAllowed), 0));--x-step: Max( var(--step), var(--too-many-ticks) * (var(--max) - var(--min)) );--tickInterval: 100/((var(--max) - var(--min)) / var(--step)) * var(--tickEvery, 1);--tickIntervalPerc: calc((100% - var(--thumb-size))/( (var(--max) - var(--min)) / var(--x-step) ) * var(--tickEvery, 1));--completed: calc((var(--value) - var(--min) ) / (var(--max) - var(--min)) * 100);--LTR: 1;display:inline-block;height:Max(var(--track-height), var(--thumb-size));background:linear-gradient(to right, var(--ticks-color) var(--ticks-thickness), transparent 1px) repeat-x;background-size:var(--tickIntervalPerc) var(--ticks-height);background-position-x:calc(var(--thumb-size)/2);background-position-y:var(--flip-y, bottom);position:relative;z-index:1;padding-bottom:var(--flip-y, var(--ticks-height));padding-top:calc(var(--flip-y) * var(--ticks-height))}[dir=\"rtl\"] .range{--LTR: -1}.range[data-ticks-position='top']{--flip-y: 1}.range::before,.range::after{--offset: calc(var(--thumb-size)/2);content:counter(x);display:var(--show-min-max, block);font:12px Arial;position:absolute;bottom:var(--flip-y, -2.5ch);top:calc(-2.5ch * var(--flip-y));opacity:var(--min-max-opacity, 0.5);pointer-events:none}.range::before{counter-reset:x var(--min);left:var(--offset);transform:translateX(calc(-50% * var(--LTR)))}[dir='rtl'] .range::before{left:auto;right:var(--offset)}.range::after{counter-reset:x var(--max);right:var(--offset);transform:translateX(calc(50% * var(--LTR)))}[dir='rtl'] .range::after{right:auto;left:var(--offset)}.range__progress{position:absolute;left:0;top:calc(50% - var(--ticks-height)/2);transform:var(--flip-y, translateY(-50%) translateZ(0));width:100%;height:calc(var(--track-height));pointer-events:none;z-index:-1;box-shadow:var(--progress-shadow);border-radius:20px;background:var(--fill-color, white)}.range__progress::after{content:'';display:block;margin-left:auto;margin-right:-1px;width:calc((100% - var(--completed) * 1%) + (var(--completed)/100) * var(--thumb-size)/2);height:100%;background:var(--progress-color, #EEE);box-shadow:inherit;border-radius:0 20px 20px 0}[dir=\"rtl\"] .range__progress::after{margin-right:auto;margin-left:-1px;border-radius:20px 0 0 20px}.range>input{-webkit-appearance:none;width:100%;height:var(--thumb-size);margin:0;cursor:-webkit-grab;cursor:grab;outline:none;background:none}.range>input::-webkit-slider-thumb{appearance:none;height:var(--thumb-size);width:var(--thumb-size);border-radius:50%;background:var(--thumb-color, white);border:1px solid silver;box-shadow:var(--inner-shadow, 0 0),var(--thumb-shadow)}.range>input::-moz-slider-thumb{appearance:none;height:var(--thumb-size);width:var(--thumb-size);border-radius:50%;background:var(--thumb-color, white);border:1px solid silver;box-shadow:var(--inner-shadow, 0 0),var(--thumb-shadow)}.range>input::-ms-thumb{appearance:none;height:var(--thumb-size);width:var(--thumb-size);border-radius:50%;background:var(--thumb-color, white);border:1px solid silver;box-shadow:var(--inner-shadow, 0 0),var(--thumb-shadow)}.range>input:active{cursor:grabbing;--thumb-color: var(--fill-color);--inner-shadow: 0 0 0 calc(var(--thumb-size)/4) inset white}.range>input:active+output{transition:0s}.range>input:hover+output{--value-background: var(--primaryColor);color:var(--value-active-color);transform:translate(var(--x-offset), 0);box-shadow:0 0 0 3px var(--value-background)}.range>output{--x-offset: calc(var(--completed) * -1% * var(--LTR));--pos: calc(((var(--value) - var(--min))/(var(--max) - var(--min))) * 100%);pointer-events:none;position:absolute;z-index:5;background:var(--value-background);border-radius:10px;padding:0 4px;top:-3ch;left:var(--pos);transform:translate(var(--x-offset), 6px);transition:all .12s ease-out, left 0s, top 0s}[dir='rtl'] .range>output{left:auto;right:var(--pos)}.range>output::after{content:var(--text-value);font:var(--value-font)}.knobs .switch{--color-bg: #444;--color-bg-on: #444;--thumb-color-off: #d75d4a;--thumb-color-on: #4ec964;--thumb-scale: 1.33;--width-multiplier: 2.5;--thumb-animation-pad: 15%;--size: 11px}.knobs .switch input:focus+div{outline:none}.switch{--color-bg: #E1E1E1;--color-bg-on: #16B5FF;--thumb-color-on: white;--thumb-color-off: var(--thumb-color-on);--thumb-scale: 1;--size: 16px;--duration: .18s;--width-multiplier: 2.5;--thumb-animation-pad: 15%;user-select:none;display:inline-flex;align-items:center}@keyframes switchMoveThumb{50%{padding:0 var(--thumb-animation-pad)}}@keyframes switchMoveThumb1{50%{padding:0 var(--thumb-animation-pad)}}.switch--textRight .switch__label{order:10;padding:0 0 0 .4em}.switch>div{cursor:pointer}.switch__label{order:0;padding-right:.4em;color:var(--label-color)}.switch__gfx{--thumb-left: 0%;--transform: translateX(calc(var(--thumb-left) * -1)) scale(var(--thumb-scale));order:5;padding:3px;position:relative;background:var(--bg, var(--color-bg));border-radius:50px;width:calc(var(--size) * var(--width-multiplier));transition:var(--duration);background-size:4px 4px}.switch__gfx::before{content:'';display:block;position:relative;left:var(--thumb-left);background:var(--thumb-color, var(--thumb-color-off));border-radius:var(--size);width:var(--size);height:var(--size);transform:var(--transform);transition:var(--duration);animation:switchMoveThumb var(--duration) ease 1}.switch input{position:absolute;opacity:0}.switch input[disabled]+div{background-image:linear-gradient(45deg, #fff 25%, transparent 25%, transparent 50%, #fff 50%, #fff 75%, transparent 75%)}.switch input:disabled ~ div{cursor:not-allowed}.switch input:indeterminate+div{--thumb-left: 50%}.switch input:checked+div{--bg: var(--color-bg-on);--thumb-left: 100%;--thumb-color: var(--thumb-color-on)}.switch input:checked+div::before{animation-name:switchMoveThumb1}.switch input:focus+div{outline:1px dotted silver}.switch input:focus:not(:focus-visible)+div{outline:none}.knobs__controls{opacity:0;text-align:right;padding:0 12px 12px}.knobs__controls>input{color:black;margin-left:1em}label[data-type=\"color\"]>.knobs__inputWrap>div{display:inline-block;border-radius:50px;overflow:hidden;width:var(--color-size);height:var(--color-size);transition:0.3s var(--in-easing);box-shadow:0px 0px 7px -2px currentColor}label[data-type=\"color\"]:hover>.knobs__inputWrap>div{padding:0 1.3em}input[type=\"color\"]{-webkit-appearance:none;appearance:none;border:0;padding:0;transform:scale(2);background:none;cursor:pointer}\n"+a.styles,t.head.insertAdjacentHTML("beforeend",`<style>${e}</style>`),t.close(),this.DOM.scope=t.body.firstElementChild,this.DOM.form=this.DOM.scope.querySelector("form"),this.DOM.mainToggler=t.getElementById("knobsToggle"),this.render()},render(){this.generateIds(),this.DOM.form.firstElementChild.innerHTML=this.knobs.concat([""]).map(this.templates.knob.bind(this)).join(""),this.toggle(this.DOM.mainToggler.checked),this.resetAll()},bindEvents(){this.eventsRefs={onChange:this.onChange.bind(this),onReset:this.resetAll.bind(this,null),onSubmit:this.onSubmit.bind(this),onClick:this.onClick.bind(this)};var{onChange:t,onReset:e,onSubmit:a,onClick:o}=this.eventsRefs;this.DOM.form.addEventListener("change",t),this.DOM.form.addEventListener("input",t),this.DOM.form.addEventListener("reset",e),this.DOM.form.addEventListener("submit",a),this.DOM.scope.addEventListener("click",o),this.DOM.mainToggler.addEventListener("change",(t=>this.toggle(t.target.checked)))}},r}));
